version: '3.8'

services:
  translate:
    build: translate
    ports:
      - 8000:8000
    volumes:
      - ./translate:/app

  mule:
    image: wslph/mule:4.4.0-ee
    ports:
      - 8081:8081
    depends_on:
      - translate
    restart: always
    volumes:
      - ./mulesoft/apps:/opt/mule/apps
      - ./mulesoft/compiled_mulesoft:/opt/mule/compiled_mulesoft
      - ./mulesoft/logs:/opt/mule/am/logs
    environment:
      - MULE_ENV=dev

  react:
    build: frontend
    ports:
      - 3000:3000
    depends_on:
      - django
    restart: always
    volumes:
      - ./frontend:/app

  django:
    build: backend
    ports:
      - 8001:8001
    restart: always
    volumes:
      - ./backend:/app
    env_file:
      - ./backend/.env
